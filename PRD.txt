ì™„ë²½í•œ ì„ íƒì…ë‹ˆë‹¤! ReactëŠ” Streamlitë³´ë‹¤ í›¨ì”¬ ë” ì „ë¬¸ì ì´ê³  ìœ ì—°í•˜ë©°, Production í™˜ê²½ì— ì í•©í•©ë‹ˆë‹¤. 

ì„œìš¸ì•„ì‚°ë³‘ì› IDPì²˜ëŸ¼ **ì—”í„°í”„ë¼ì´ì¦ˆê¸‰ ì˜ë£Œ í”Œë«í¼**ì—ëŠ” Reactê°€ í™•ì‹¤íˆ ë” ë‚˜ì€ ì„ íƒì…ë‹ˆë‹¤.

---

## **ğŸ¯ React ê¸°ë°˜ í†µí•© ëŒ€ì‹œë³´ë“œ ì•„í‚¤í…ì²˜**

### **ê¸°ìˆ  ìŠ¤íƒ**

#### **Frontend (React Ecosystem)**
```json
{
  "core": {
    "react": "^18.2.0",
    "typescript": "^5.0.0",
    "vite": "^5.0.0"  // ë¹ ë¥¸ ê°œë°œ ì„œë²„
  },
  "routing": {
    "react-router-dom": "^6.20.0"
  },
  "state_management": {
    "zustand": "^4.4.7",  // Reduxë³´ë‹¤ ê°€ë³ê³  ê°„ë‹¨
    "react-query": "^5.0.0"  // ì„œë²„ ìƒíƒœ ê´€ë¦¬
  },
  "ui_framework": {
    "antd": "^5.12.0",  // ì—”í„°í”„ë¼ì´ì¦ˆ UI ë¼ì´ë¸ŒëŸ¬ë¦¬
    "@ant-design/pro-components": "^2.6.0"  // ProLayout, ProTable ë“±
  },
  "visualization": {
    "recharts": "^2.10.0",  // React ì¹œí™”ì 
    "apache-echarts": "^5.4.0",  // ê°•ë ¥í•œ ì°¨íŠ¸
    "plotly.js": "^2.27.0"  // 3D, ê³¼í•™ ì‹œê°í™”
  },
  "data_grid": {
    "ag-grid-react": "^31.0.0"  // ì—”í„°í”„ë¼ì´ì¦ˆê¸‰ í…Œì´ë¸”
  },
  "form": {
    "react-hook-form": "^7.49.0",  // í¼ ê´€ë¦¬
    "zod": "^3.22.0"  // ìŠ¤í‚¤ë§ˆ ê²€ì¦
  },
  "api": {
    "axios": "^1.6.0"
  }
}
```

#### **Backend (FastAPI)**
```python
fastapi==0.109.0
uvicorn[standard]==0.27.0
sqlalchemy==2.0.25
asyncpg==0.29.0  # ë¹„ë™ê¸° PostgreSQL
redis==5.0.1
celery==5.3.4
pydantic==2.5.3
```

---

## **í”„ë¡œì íŠ¸ êµ¬ì¡°**

```
C:\projects\datastreams\asan\
â”œâ”€â”€ frontend/                    # React ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â”œâ”€â”€ main.tsx
â”‚   â”‚   â”œâ”€â”€ layouts/            # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ MainLayout.tsx
â”‚   â”‚   â”‚   â””â”€â”€ AuthLayout.tsx
â”‚   â”‚   â”œâ”€â”€ pages/              # 7ê°œ SFR í˜ì´ì§€
â”‚   â”‚   â”‚   â”œâ”€â”€ Home/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SFR001_Common/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SystemArchitecture.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SFR002_DataMart/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ MartDesigner.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DataQuality.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SFR003_BI/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ReportBuilder.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SFR004_OLAP/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SliceDice.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PivotTable.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ DrillDown.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SFR005_ETL/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PipelineMonitor.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ JobScheduler.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SFR006_AI/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ JupyterHub.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ResourceMonitor.tsx
â”‚   â”‚   â”‚   â””â”€â”€ SFR007_CDW/
â”‚   â”‚   â”‚       â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ Text2SQL.tsx
â”‚   â”‚   â”‚       â””â”€â”€ ResearchSupport.tsx
â”‚   â”‚   â”œâ”€â”€ components/         # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ Chart/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LineChart.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BarChart.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PieChart.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ DataTable/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AGGridTable.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Filter/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ AdvancedFilter.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Layout/
â”‚   â”‚   â”‚       â”œâ”€â”€ Sidebar.tsx
â”‚   â”‚   â”‚       â””â”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ services/           # API ì„œë¹„ìŠ¤
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”‚   â””â”€â”€ modules/
â”‚   â”‚   â”‚       â”œâ”€â”€ datamart.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ olap.ts
â”‚   â”‚   â”‚       â””â”€â”€ text2sql.ts
â”‚   â”‚   â”œâ”€â”€ stores/             # Zustand ìŠ¤í† ì–´
â”‚   â”‚   â”‚   â”œâ”€â”€ authStore.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ uiStore.ts
â”‚   â”‚   â”‚   â””â”€â”€ dataStore.ts
â”‚   â”‚   â”œâ”€â”€ hooks/              # ì»¤ìŠ¤í…€ í›…
â”‚   â”‚   â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ useData.ts
â”‚   â”‚   â”‚   â””â”€â”€ useOLAP.ts
â”‚   â”‚   â”œâ”€â”€ types/              # TypeScript íƒ€ì…
â”‚   â”‚   â”‚   â”œâ”€â”€ api.types.ts
â”‚   â”‚   â”‚   â””â”€â”€ domain.types.ts
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â”œâ”€â”€ formatters.ts
â”‚   â”‚       â””â”€â”€ validators.ts
â”‚   â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â””â”€â”€ vite.config.ts
â”‚
â”œâ”€â”€ backend/                     # FastAPI ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ main.py
â”‚   â”‚   â”œâ”€â”€ config.py
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ v1/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ router.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ datamart.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ olap.py
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ etl.py
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ text2sql.py
â”‚   â”‚   â”œâ”€â”€ models/             # SQLAlchemy ëª¨ë¸
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py
â”‚   â”‚   â”‚   â”œâ”€â”€ datamart.py
â”‚   â”‚   â”‚   â””â”€â”€ query_history.py
â”‚   â”‚   â”œâ”€â”€ schemas/            # Pydantic ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ user.py
â”‚   â”‚   â”‚   â”œâ”€â”€ datamart.py
â”‚   â”‚   â”‚   â””â”€â”€ query.py
â”‚   â”‚   â”œâ”€â”€ services/           # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”‚   â”œâ”€â”€ olap_service.py
â”‚   â”‚   â”‚   â”œâ”€â”€ text2sql_service.py
â”‚   â”‚   â”‚   â””â”€â”€ etl_service.py
â”‚   â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”‚   â”œâ”€â”€ database.py
â”‚   â”‚   â”‚   â”œâ”€â”€ security.py
â”‚   â”‚   â”‚   â””â”€â”€ cache.py
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ alembic/                # DB ë§ˆì´ê·¸ë ˆì´ì…˜
â”‚
â”œâ”€â”€ data/                        # ë°ì´í„° ì €ì¥ì†Œ
â”‚   â”œâ”€â”€ raw/                     # AI-Hub ì›ë³¸
â”‚   â”œâ”€â”€ processed/               # ì „ì²˜ë¦¬ ì™„ë£Œ
â”‚   â””â”€â”€ warehouse/               # ë°ì´í„°ë§ˆíŠ¸
â”‚
â”œâ”€â”€ docker/
â”‚   â”œâ”€â”€ frontend.Dockerfile
â”‚   â”œâ”€â”€ backend.Dockerfile
â”‚   â””â”€â”€ docker-compose.yml
â”‚
â””â”€â”€ README.md
```

---

## **Step-by-Step êµ¬í˜„ ê°€ì´ë“œ**

### **Step 1: í”„ë¡œì íŠ¸ ì´ˆê¸°í™” (15ë¶„)**

```bash
# í”„ë¡œì íŠ¸ ë£¨íŠ¸
cd C:\projects\datastreams\asan

# Frontend ì´ˆê¸°í™”
npm create vite@latest frontend -- --template react-ts
cd frontend
npm install

# í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜
npm install antd @ant-design/pro-components @ant-design/icons
npm install react-router-dom zustand @tanstack/react-query
npm install axios recharts apache-echarts echarts-for-react
npm install ag-grid-react ag-grid-community
npm install react-hook-form zod @hookform/resolvers
npm install dayjs lodash
npm install -D @types/lodash

# Backend ì´ˆê¸°í™”
cd ../backend
python -m venv venv
.\venv\Scripts\activate
pip install -r requirements.txt
```

---

### **Step 2: Backend API êµ¬ì¶• (FastAPI)**

#### **`backend/app/main.py`**
```python
from fastapi import FastAPI
from fastapi.middleware.cors import CORSMiddleware
from contextlib import asynccontextmanager
from app.api.v1.router import api_router
from app.core.database import engine, Base

@asynccontextmanager
async def lifespan(app: FastAPI):
    # Startup
    async with engine.begin() as conn:
        await conn.run_sync(Base.metadata.create_all)
    yield
    # Shutdown
    await engine.dispose()

app = FastAPI(
    title="ì„œìš¸ì•„ì‚°ë³‘ì› IDP API",
    description="í†µí•© ë°ì´í„° í”Œë«í¼ REST API",
    version="1.0.0",
    lifespan=lifespan
)

# CORS ì„¤ì •
app.add_middleware(
    CORSMiddleware,
    allow_origins=["http://localhost:5173"],  # Vite ê°œë°œ ì„œë²„
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)

# API ë¼ìš°í„° ë“±ë¡
app.include_router(api_router, prefix="/api/v1")

@app.get("/")
async def root():
    return {
        "message": "ì„œìš¸ì•„ì‚°ë³‘ì› IDP API",
        "version": "1.0.0",
        "docs": "/docs"
    }

@app.get("/health")
async def health_check():
    return {"status": "healthy"}
```

#### **`backend/app/api/v1/router.py`**
```python
from fastapi import APIRouter
from app.api.v1 import auth, datamart, olap, etl, text2sql

api_router = APIRouter()

api_router.include_router(auth.router, prefix="/auth", tags=["ì¸ì¦"])
api_router.include_router(datamart.router, prefix="/datamart", tags=["ë°ì´í„°ë§ˆíŠ¸"])
api_router.include_router(olap.router, prefix="/olap", tags=["OLAP ë¶„ì„"])
api_router.include_router(etl.router, prefix="/etl", tags=["ETL"])
api_router.include_router(text2sql.router, prefix="/text2sql", tags=["Text2SQL"])
```

#### **`backend/app/api/v1/olap.py`** (ì˜ˆì‹œ)
```python
from fastapi import APIRouter, HTTPException
from typing import List, Optional
from pydantic import BaseModel
import pandas as pd

router = APIRouter()

class OLAPQuery(BaseModel):
    dimensions: List[str]  # ['age_group', 'gender']
    metrics: List[str]     # ['patient_count', 'avg_duration']
    filters: Optional[dict] = None
    drill_level: Optional[str] = None

class OLAPResult(BaseModel):
    data: List[dict]
    total_rows: int
    execution_time_ms: float

@router.post("/query", response_model=OLAPResult)
async def execute_olap_query(query: OLAPQuery):
    """OLAP ì¿¼ë¦¬ ì‹¤í–‰"""
    try:
        # ì‹¤ì œ êµ¬í˜„ì—ì„œëŠ” DuckDB ë˜ëŠ” ClickHouse ì‚¬ìš©
        # ì—¬ê¸°ì„œëŠ” ë°ëª¨ìš© Mock ë°ì´í„°
        
        # ì˜ˆì‹œ: Pandasë¡œ ì§‘ê³„
        df = pd.DataFrame({
            'age_group': ['20ëŒ€', '30ëŒ€', '40ëŒ€', '50ëŒ€'],
            'patient_count': [150, 230, 180, 120],
            'avg_duration': [3.2, 4.5, 5.1, 6.8]
        })
        
        result_data = df.to_dict('records')
        
        return OLAPResult(
            data=result_data,
            total_rows=len(result_data),
            execution_time_ms=45.2
        )
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))

@router.get("/dimensions")
async def get_available_dimensions():
    """ì‚¬ìš© ê°€ëŠ¥í•œ ì°¨ì› ëª©ë¡ ì¡°íšŒ"""
    return {
        "dimensions": [
            {"id": "age_group", "label": "ì—°ë ¹ëŒ€", "type": "categorical"},
            {"id": "gender", "label": "ì„±ë³„", "type": "categorical"},
            {"id": "region", "label": "ì§€ì—­", "type": "categorical"},
            {"id": "diagnosis", "label": "ì§„ë‹¨ëª…", "type": "categorical"},
            {"id": "time", "label": "ì‹œê°„", "type": "temporal"}
        ]
    }

@router.get("/metrics")
async def get_available_metrics():
    """ì‚¬ìš© ê°€ëŠ¥í•œ ì§€í‘œ ëª©ë¡ ì¡°íšŒ"""
    return {
        "metrics": [
            {"id": "patient_count", "label": "í™˜ì ìˆ˜", "type": "count"},
            {"id": "visit_count", "label": "ë°©ë¬¸ íšŸìˆ˜", "type": "sum"},
            {"id": "avg_duration", "label": "í‰ê·  ì…ì›ì¼ìˆ˜", "type": "average"},
            {"id": "cost", "label": "ì§„ë£Œë¹„", "type": "sum"}
        ]
    }
```

#### **`backend/app/api/v1/text2sql.py`** ğŸ”¥
```python
from fastapi import APIRouter, HTTPException, Depends
from pydantic import BaseModel
from typing import Optional
from app.services.text2sql_service import Text2SQLService

router = APIRouter()

class Text2SQLRequest(BaseModel):
    question: str
    context: Optional[dict] = None

class Text2SQLResponse(BaseModel):
    sql: str
    explanation: str
    confidence: float
    execution_result: Optional[dict] = None

@router.post("/generate", response_model=Text2SQLResponse)
async def generate_sql_from_text(
    request: Text2SQLRequest,
    service: Text2SQLService = Depends()
):
    """
    ìì—°ì–´ ì§ˆì˜ë¥¼ SQLë¡œ ë³€í™˜
    
    Example:
        question: "2023ë…„ì— ë‹¹ë‡¨ë³‘ ì§„ë‹¨ë°›ì€ 50ëŒ€ í™˜ìëŠ” ëª‡ ëª…?"
    """
    try:
        result = await service.natural_language_to_sql(
            question=request.question,
            context=request.context
        )
        return result
    except Exception as e:
        raise HTTPException(status_code=500, detail=str(e))

@router.post("/execute")
async def execute_generated_sql(
    sql: str,
    service: Text2SQLService = Depends()
):
    """ìƒì„±ëœ SQL ì‹¤í–‰"""
    try:
        result = await service.execute_sql(sql)
        return result
    except Exception as e:
        raise HTTPException(status_code=400, detail=f"SQL ì‹¤í–‰ ì˜¤ë¥˜: {str(e)}")

@router.get("/history")
async def get_query_history(limit: int = 10):
    """ìµœê·¼ ì§ˆì˜ ì´ë ¥ ì¡°íšŒ"""
    # TODO: ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì¡°íšŒ
    return {
        "queries": [
            {
                "id": 1,
                "question": "2023ë…„ ë‹¹ë‡¨ë³‘ í™˜ì ìˆ˜ëŠ”?",
                "sql": "SELECT COUNT(*) FROM ...",
                "timestamp": "2025-11-17T10:30:00"
            }
        ]
    }
```

---

### **Step 3: Frontend êµ¬ì¡° êµ¬ì¶•**

#### **`frontend/src/main.tsx`**
```tsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import { BrowserRouter } from 'react-router-dom'
import { QueryClient, QueryClientProvider } from '@tanstack/react-query'
import { ConfigProvider } from 'antd'
import koKR from 'antd/locale/ko_KR'
import App from './App'
import './index.css'

const queryClient = new QueryClient({
  defaultOptions: {
    queries: {
      refetchOnWindowFocus: false,
      retry: 1,
    },
  },
})

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <BrowserRouter>
      <QueryClientProvider client={queryClient}>
        <ConfigProvider locale={koKR}>
          <App />
        </ConfigProvider>
      </QueryClientProvider>
    </BrowserRouter>
  </React.StrictMode>,
)
```

#### **`frontend/src/App.tsx`**
```tsx
import { Routes, Route, Navigate } from 'react-router-dom'
import MainLayout from './layouts/MainLayout'
import Home from './pages/Home'
import SFR002DataMart from './pages/SFR002_DataMart'
import SFR003BI from './pages/SFR003_BI'
import SFR004OLAP from './pages/SFR004_OLAP'
import SFR005ETL from './pages/SFR005_ETL'
import SFR006AI from './pages/SFR006_AI'
import SFR007CDW from './pages/SFR007_CDW'

function App() {
  return (
    <Routes>
      <Route path="/" element={<MainLayout />}>
        <Route index element={<Home />} />
        <Route path="datamart" element={<SFR002DataMart />} />
        <Route path="bi" element={<SFR003BI />} /> {/* ë¹„ì•„ì´ë§¤íŠ¸ë¦­ìŠ¤ BI ì†”ë£¨ì…˜ ì‚¬ìš© */}
        <Route path="olap" element={<SFR004OLAP />} /> {/* ë¹„ì•„ì´ë§¤íŠ¸ë¦­ìŠ¤ OLAP ì†”ë£¨ì…˜ ì‚¬ìš© */}
        <Route path="etl" element={<SFR005ETL />} /> {/* í…Œë¼ìŠ¤íŠ¸ë¦¼ ETL ì†”ë£¨ì…˜ ì‚¬ìš© */}
        <Route path="ai" element={<SFR006AI />} />
        <Route path="cdw" element={<SFR007CDW />} />
        <Route path="*" element={<Navigate to="/" replace />} />
      </Route>
    </Routes>
  )
}

export default App
```

#### **`frontend/src/layouts/MainLayout.tsx`**
```tsx
import React, { useState } from 'react'
import { Outlet, useNavigate, useLocation } from 'react-router-dom'
import { Layout, Menu, theme, Typography, Space, Avatar, Dropdown } from 'antd'
import {
  HomeOutlined,
  DatabaseOutlined,
  BarChartOutlined,
  FundOutlined,
  ApiOutlined,
  RobotOutlined,
  ExperimentOutlined,
  UserOutlined,
  SettingOutlined,
  LogoutOutlined,
} from '@ant-design/icons'
import type { MenuProps } from 'antd'

const { Header, Sider, Content } = Layout
const { Title, Text } = Typography

const MainLayout: React.FC = () => {
  const [collapsed, setCollapsed] = useState(false)
  const navigate = useNavigate()
  const location = useLocation()
  const {
    token: { colorBgContainer, borderRadiusLG },
  } = theme.useToken()

  const menuItems: MenuProps['items'] = [
    {
      key: '/',
      icon: <HomeOutlined />,
      label: 'í™ˆ',
    },
    {
      key: 'group-data',
      label: 'ë°ì´í„° ê´€ë¦¬',
      type: 'group',
    },
    { /* ìƒìš© ì†”ë£¨ì…˜: ë°ì´í„°ìŠ¤íŠ¸ë¦¼ì¦ˆ Tera ONE */
      key: '/datamart',
      icon: <DatabaseOutlined />,
      label: 'SFR-002 ë°ì´í„°ë§ˆíŠ¸ (Tera ONE)',
    },
    { /* ìƒìš© ì†”ë£¨ì…˜: ë°ì´í„°ìŠ¤íŠ¸ë¦¼ì¦ˆ í…Œë¼ìŠ¤íŠ¸ë¦¼ ETL */
      key: '/etl',
      icon: <ApiOutlined />,
      label: 'SFR-005 ETL (í…Œë¼ìŠ¤íŠ¸ë¦¼)',
    },
    {
      key: 'group-analysis',
      label: 'ë¶„ì„ & ì‹œê°í™”',
      type: 'group',
    },
    { /* ìƒìš© ì†”ë£¨ì…˜: ë¹„ì•„ì´ë§¤íŠ¸ë¦­ìŠ¤ BI í”Œë«í¼ */
      key: '/bi',
      icon: <BarChartOutlined />,
      label: 'SFR-003 BI (ìƒìš©ì†”ë£¨ì…˜)',
    },
    { /* ìƒìš© ì†”ë£¨ì…˜: ë¹„ì•„ì´ë§¤íŠ¸ë¦­ìŠ¤ OLAP í”Œë«í¼ */
      key: '/olap',
      icon: <FundOutlined />,
      label: 'SFR-004 OLAP (ìƒìš©ì†”ë£¨ì…˜)',
    },
    {
      key: 'group-ai',
      label: 'AI & ì—°êµ¬',
      type: 'group',
    },
    {
      key: '/ai',
      icon: <RobotOutlined />,
      label: 'SFR-006 AI í™˜ê²½',
    },
    {
      key: '/cdw',
      icon: <ExperimentOutlined />,
      label: 'SFR-007 CDW ì—°êµ¬',
    },
  ]

  const userMenuItems: MenuProps['items'] = [
    {
      key: 'profile',
      icon: <UserOutlined />,
      label: 'í”„ë¡œí•„',
    },
    {
      key: 'settings',
      icon: <SettingOutlined />,
      label: 'ì„¤ì •',
    },
    {
      type: 'divider',
    },
    {
      key: 'logout',
      icon: <LogoutOutlined />,
      label: 'ë¡œê·¸ì•„ì›ƒ',
      danger: true,
    },
  ]

  const handleMenuClick: MenuProps['onClick'] = ({ key }) => {
    navigate(key)
  }

  return (
    <Layout style={{ minHeight: '100vh' }}>
      <Sider
        collapsible
        collapsed={collapsed}
        onCollapse={setCollapsed}
        width={250}
        style={{
          overflow: 'auto',
          height: '100vh',
          position: 'fixed',
          left: 0,
          top: 0,
          bottom: 0,
        }}
      >
        <div
          style={{
            height: 64,
            margin: 16,
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center',
          }}
        >
          {!collapsed ? (
            <Space direction="vertical" size={0}>
              <Title level={4} style={{ margin: 0, color: 'white' }}>
                ì•„ì‚°ë³‘ì› IDP
              </Title>
              <Text type="secondary" style={{ fontSize: 12 }}>
                í†µí•© ë°ì´í„° í”Œë«í¼
              </Text>
            </Space>
          ) : (
            <Title level={4} style={{ margin: 0, color: 'white' }}>
              IDP
            </Title>
          )}
        </div>
        <Menu
          theme="dark"
          mode="inline"
          selectedKeys={[location.pathname]}
          items={menuItems}
          onClick={handleMenuClick}
        />
      </Sider>

      <Layout style={{ marginLeft: collapsed ? 80 : 250 }}>
        <Header
          style={{
            padding: '0 24px',
            background: colorBgContainer,
            display: 'flex',
            justifyContent: 'space-between',
            alignItems: 'center',
            boxShadow: '0 2px 8px rgba(0,0,0,0.1)',
          }}
        >
          <Title level={4} style={{ margin: 0 }}>
            {menuItems.find((item) => item?.key === location.pathname)
              ?.label || 'í™ˆ'}
          </Title>

          <Dropdown menu={{ items: userMenuItems }} placement="bottomRight">
            <Space style={{ cursor: 'pointer' }}>
              <Avatar icon={<UserOutlined />} />
              <Text>ê´€ë¦¬ì</Text>
            </Space>
          </Dropdown>
        </Header>

        <Content
          style={{
            margin: '24px 16px',
            padding: 24,
            minHeight: 280,
            background: colorBgContainer,
            borderRadius: borderRadiusLG,
          }}
        >
          <Outlet />
        </Content>
      </Layout>
    </Layout>
  )
}

export default MainLayout
```

#### **`frontend/src/pages/Home/index.tsx`**
```tsx
import React from 'react'
import { Card, Row, Col, Statistic, Typography, Space, Divider } from 'antd'
import {
  DatabaseOutlined,
  UserOutlined,
  FileTextOutlined,
  RiseOutlined,
} from '@ant-design/icons'

const { Title, Paragraph } = Typography

const Home: React.FC = () => {
  return (
    <Space direction="vertical" size="large" style={{ width: '100%' }}>
      <div>
        <Title level={2}>ì„œìš¸ì•„ì‚°ë³‘ì› í†µí•© ë°ì´í„° í”Œë«í¼</Title>
        <Paragraph>
          Integrated Data Platform (IDP) POC - 7ê°œ ê¸°ëŠ¥ìš”êµ¬ì‚¬í•­ í†µí•© ëŒ€ì‹œë³´ë“œ
        </Paragraph>
      </div>

      <Row gutter={[16, 16]}>
        <Col xs={24} sm={12} lg={6}>
          <Card>
            <Statistic
              title="ë°ì´í„°ë§ˆíŠ¸"
              value={12}
              prefix={<DatabaseOutlined />}
              suffix="ê°œ"
            />
          </Card>
        </Col>
        <Col xs={24} sm={12} lg={6}>
          <Card>
            <Statistic
              title="í™œì„± ì‚¬ìš©ì"
              value={45}
              prefix={<UserOutlined />}
              suffix="ëª…"
            />
          </Card>
        </Col>
        <Col xs={24} sm={12} lg={6}>
          <Card>
            <Statistic
              title="ETL ì‘ì—…"
              value={128}
              prefix={<FileTextOutlined />}
              suffix="ê±´"
            />
          </Card>
        </Col>
        <Col xs={24} sm={12} lg={6}>
          <Card>
            <Statistic
              title="ì‹œìŠ¤í…œ ê°€ìš©ì„±"
              value={99.9}
              prefix={<RiseOutlined />}
              suffix="%"
              precision={1}
            />
          </Card>
        </Col>
      </Row>

      <Divider />

      <Row gutter={[16, 16]}>
        <Col xs={24} lg={12}>
          <Card title="ìµœê·¼ í™œë™" bordered={false}>
            <Space direction="vertical" style={{ width: '100%' }}>
              <div>âœ… SFR-004 OLAP ë¶„ì„ í¬íƒˆ êµ¬í˜„ ì™„ë£Œ</div>
              <div>ğŸ”„ ETL íŒŒì´í”„ë¼ì¸ ì„¤ì • ì¤‘</div>
              <div>ğŸ“Š ë°ì´í„°ë§ˆíŠ¸ ìŠ¤í‚¤ë§ˆ ì„¤ê³„ ì§„í–‰ ì¤‘</div>
            </Space>
          </Card>
        </Col>
        <Col xs={24} lg={12}>
          <Card title="ì‹œìŠ¤í…œ ìƒíƒœ" bordered={false}>
            <Space direction="vertical" style={{ width: '100%' }}>
              <div>ğŸŸ¢ ë°ì´í„°ë² ì´ìŠ¤: ì •ìƒ</div>
              <div>ğŸŸ¢ API ì„œë²„: ì •ìƒ</div>
              <div>ğŸŸ¡ ETL ìŠ¤ì¼€ì¤„ëŸ¬: ì ê²€ ì¤‘</div>
            </Space>
          </Card>
        </Col>
      </Row>
    </Space>
  )
}

export default Home
```

---

### **Step 4: SFR-004 OLAP React ë³€í™˜ ì˜ˆì‹œ**

#### **`frontend/src/pages/SFR004_OLAP/index.tsx`**
```tsx
import React, { useState } from 'react'
import { Tabs, Card } from 'antd'
import SliceDice from './components/SliceDice'
import PivotTable from './components/PivotTable'
import DrillDown from './components/DrillDown'
import MultiDimensional from './components/MultiDimensional'

const SFR004OLAP: React.FC = () => {
  const [activeTab, setActiveTab] = useState('slice-dice')

  const tabItems = [
    {
      key: 'slice-dice',
      label: 'ìŠ¬ë¼ì´ìŠ¤ & ë‹¤ì´ìŠ¤',
      children: <SliceDice />,
    },
    {
      key: 'pivot',
      label: 'í”¼ë²— í…Œì´ë¸”',
      children: <PivotTable />,
    },
    {
      key: 'drilldown',
      label: 'ë“œë¦´ë‹¤ìš´/ë¡¤ì—…',
      children: <DrillDown />,
    },
    {
      key: 'multi',
      label: 'ë‹¤ì°¨ì› ë¶„ì„',
      children: <MultiDimensional />,
    },
  ]

  return (
    <Card>
      <Tabs
        activeKey={activeTab}
        items={tabItems}
        onChange={setActiveTab}
        size="large"
      />
    </Card>
  )
}

export default SFR004OLAP
```

#### **`frontend/src/pages/SFR004_OLAP/components/SliceDice.tsx`**
```tsx
import React, { useState } from 'react'
import { Row, Col, Select, Button, Space, Card } from 'antd'
import { useQuery } from '@tanstack/react-query'
import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts'
import { olapAPI } from '@/services/api'

const SliceDice: React.FC = () => {
  const [selectedDimensions, setSelectedDimensions] = useState<string[]>(['age_group'])
  const [selectedMetrics, setSelectedMetrics] = useState<string[]>(['patient_count'])

  // ì‚¬ìš© ê°€ëŠ¥í•œ ì°¨ì› ì¡°íšŒ
  const { data: dimensions } = useQuery({
    queryKey: ['dimensions'],
    queryFn: olapAPI.getDimensions,
  })

  // ì‚¬ìš© ê°€ëŠ¥í•œ ì§€í‘œ ì¡°íšŒ
  const { data: metrics } = useQuery({
    queryKey: ['metrics'],
    queryFn: olapAPI.getMetrics,
  })

  // OLAP ì¿¼ë¦¬ ì‹¤í–‰
  const { data: chartData, isLoading, refetch } = useQuery({
    queryKey: ['olap-query', selectedDimensions, selectedMetrics],
    queryFn: () => olapAPI.executeQuery({
      dimensions: selectedDimensions,
      metrics: selectedMetrics,
    }),
    enabled: false,
  })

  const handleExecuteQuery = () => {
    refetch()
  }

  return (
    <Space direction="vertical" size="large" style={{ width: '100%' }}>
      <Card title="í•„í„° ì„¤ì •">
        <Row gutter={[16, 16]}>
          <Col span={12}>
            <div>
              <label>ì°¨ì› ì„ íƒ:</label>
              <Select
                mode="multiple"
                style={{ width: '100%' }}
                placeholder="ì°¨ì›ì„ ì„ íƒí•˜ì„¸ìš”"
                value={selectedDimensions}
                onChange={setSelectedDimensions}
                options={dimensions?.dimensions.map(d => ({
                  label: d.label,
                  value: d.id,
                }))}
              />
            </div>
          </Col>
          <Col span={12}>
            <div>
              <label>ì§€í‘œ ì„ íƒ:</label>
              <Select
                mode="multiple"
                style={{ width: '100%' }}
                placeholder="ì§€í‘œë¥¼ ì„ íƒí•˜ì„¸ìš”"
                value={selectedMetrics}
                onChange={setSelectedMetrics}
                options={metrics?.metrics.map(m => ({
                  label: m.label,
                  value: m.id,
                }))}
              />
            </div>
          </Col>
        </Row>
        <div style={{ marginTop: 16 }}>
          <Button type="primary" onClick={handleExecuteQuery} loading={isLoading}>
            ë¶„ì„ ì‹¤í–‰
          </Button>
        </div>
      </Card>

      {chartData && (
        <Card title="ë¶„ì„ ê²°ê³¼">
          <ResponsiveContainer width="100%" height={400}>
            <BarChart data={chartData.data}>
              <CartesianGrid strokeDasharray="3 3" />
              <XAxis dataKey={selectedDimensions[0]} />
              <YAxis />
              <Tooltip />
              <Legend />
              {selectedMetrics.map((metric, idx) => (
                <Bar
                  key={metric}
                  dataKey={metric}
                  fill={`hsl(${idx * 60}, 70%, 50%)`}
                />
              ))}
            </BarChart>
          </ResponsiveContainer>
        </Card>
      )}
    </Space>
  )
}

export default SliceDice
```

#### **`frontend/src/services/api.ts`**
```typescript
import axios from 'axios'

const apiClient = axios.create({
  baseURL: 'http://localhost:8000/api/v1',
  timeout: 10000,
  headers: {
    'Content-Type': 'application/json',
  },
})

// OLAP API
export const olapAPI = {
  getDimensions: async () => {
    const { data } = await apiClient.get('/olap/dimensions')
    return data
  },
  
  getMetrics: async () => {
    const { data } = await apiClient.get('/olap/metrics')
    return data
  },
  
  executeQuery: async (query: {
    dimensions: string[]
    metrics: string[]
    filters?: any
  }) => {
    const { data } = await apiClient.post('/olap/query', query)
    return data
  },
}

// Text2SQL API
export const text2sqlAPI = {
  generateSQL: async (question: string) => {
    const { data } = await apiClient.post('/text2sql/generate', { question })
    return data
  },
  
  executeSQL: async (sql: string) => {
    const { data } = await apiClient.post('/text2sql/execute', { sql })
    return data
  },
}

export default apiClient
```

---

### **Step 5: SFR-007 Text2SQL React êµ¬í˜„** ğŸ”¥

#### **`frontend/src/pages/SFR007_CDW/components/Text2SQL.tsx`**
```tsx
import React, { useState } from 'react'
import { Card, Input, Button, Space, Alert, Table, Typography, Tag, Divider } from 'antd'
import { SendOutlined, LoadingOutlined } from '@ant-design/icons'
import { useMutation } from '@tanstack/react-query'
import { text2sqlAPI } from '@/services/api'
import { Prism as SyntaxHighlighter } from 'react-syntax-highlighter'
import { vscDarkPlus } from 'react-syntax-highlighter/dist/esm/styles/prism'

const { TextArea } = Input
const { Title, Text, Paragraph } = Typography

const Text2SQL: React.FC = () => {
  const [question, setQuestion] = useState('')
  const [sqlResult, setSqlResult] = useState<any>(null)

  const generateMutation = useMutation({
    mutationFn: text2sqlAPI.generateSQL,
    onSuccess: (data) => {
      setSqlResult(data)
    },
  })

  const handleSubmit = () => {
    if (!question.trim()) return
    generateMutation.mutate(question)
  }

  const handleExample = (exampleQuestion: string) => {
    setQuestion(exampleQuestion)
  }

  return (
    <Space direction="vertical" size="large" style={{ width: '100%' }}>
      <Alert
        message="ìì—°ì–´ë¥¼ SQLë¡œ ë³€í™˜"
        description="ì¼ìƒì ì¸ ì§ˆë¬¸ì„ ì…ë ¥í•˜ì‹œë©´, AIê°€ ì ì ˆí•œ SQL ì¿¼ë¦¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤."
        type="info"
        showIcon
      />

      <Card title="ì§ˆì˜ ì…ë ¥">
        <Space direction="vertical" style={{ width: '100%' }}>
          <TextArea
            rows={4}
            placeholder="ì˜ˆ) 2023ë…„ì— ë‹¹ë‡¨ë³‘ ì§„ë‹¨ë°›ì€ 50ëŒ€ ë‚¨ì„± í™˜ìëŠ” ëª‡ ëª…ì¸ê°€ìš”?"
            value={question}
            onChange={(e) => setQuestion(e.target.value)}
            onPressEnter={(e) => {
              if (e.shiftKey) return // Shift+EnterëŠ” ì¤„ë°”ê¿ˆ
              e.preventDefault()
              handleSubmit()
            }}
          />
          
          <Space>
            <Button
              type="primary"
              icon={<SendOutlined />}
              onClick={handleSubmit}
              loading={generateMutation.isPending}
            >
              SQL ìƒì„±
            </Button>
            
            <Text type="secondary">ë˜ëŠ” ì˜ˆì‹œ ì§ˆë¬¸ ì„ íƒ:</Text>
          </Space>

          <Space wrap>
            <Button
              size="small"
              onClick={() => handleExample('2023ë…„ì— ê³ í˜ˆì•• í™˜ìëŠ” ëª‡ ëª…ì¸ê°€ìš”?')}
            >
              ì˜ˆì‹œ 1
            </Button>
            <Button
              size="small"
              onClick={() => handleExample('50ëŒ€ ë‚¨ì„± ì¤‘ ë‹¹ë‡¨ë³‘ í™˜ìì˜ í‰ê·  ì§„ë£Œ íšŸìˆ˜ëŠ”?')}
            >
              ì˜ˆì‹œ 2
            </Button>
            <Button
              size="small"
              onClick={() => handleExample('ìµœê·¼ 1ë…„ê°„ ê°€ì¥ ë§ì´ ì§„ë‹¨ëœ ì§ˆë³‘ ìƒìœ„ 5ê°œëŠ”?')}
            >
              ì˜ˆì‹œ 3
            </Button>
          </Space>
        </Space>
      </Card>

      {generateMutation.isPending && (
        <Card>
          <Space>
            <LoadingOutlined style={{ fontSize: 24 }} />
            <Text>AIê°€ SQLì„ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...</Text>
          </Space>
        </Card>
      )}

      {sqlResult && (
        <>
          <Card title="ìƒì„±ëœ SQL">
            <Space direction="vertical" style={{ width: '100%' }}>
              <div>
                <Text strong>ì‹ ë¢°ë„: </Text>
                <Tag color={sqlResult.confidence > 0.8 ? 'green' : 'orange'}>
                  {(sqlResult.confidence * 100).toFixed(1)}%
                </Tag>
              </div>
              
              <SyntaxHighlighter
                language="sql"
                style={vscDarkPlus}
                customStyle={{ borderRadius: 8 }}
              >
                {sqlResult.sql}
              </SyntaxHighlighter>

              <Alert
                message="SQL ì„¤ëª…"
                description={sqlResult.explanation}
                type="success"
                showIcon
              />
            </Space>
          </Card>

          {sqlResult.execution_result && (
            <Card title="ì‹¤í–‰ ê²°ê³¼">
              <Table
                dataSource={sqlResult.execution_result.results}
                columns={Object.keys(sqlResult.execution_result.results[0] || {}).map(
                  (key) => ({
                    title: key,
                    dataKey: key,
                    key,
                  })
                )}
                pagination={{ pageSize: 10 }}
              />
              
              <Divider />
              
              <Paragraph>
                <Text strong>ê²°ê³¼ ì„¤ëª…: </Text>
                {sqlResult.execution_result.natural_language_explanation}
              </Paragraph>
              
              <Space>
                <Text type="secondary">
                  ì‹¤í–‰ ì‹œê°„: {sqlResult.execution_result.execution_time}ms
                </Text>
                <Text type="secondary">
                  ê²°ê³¼ í–‰ ìˆ˜: {sqlResult.execution_result.row_count}ê°œ
                </Text>
              </Space>
            </Card>
          )}
        </>
      )}
    </Space>
  )
}

export default Text2SQL
```

---

## **Docker ë°°í¬ êµ¬ì„±**

#### **`docker/docker-compose.yml`**
```yaml
version: '3.8'

services:
  # PostgreSQL ë°ì´í„°ë² ì´ìŠ¤
  postgres:
    image: postgres:15-alpine
    container_name: asan-postgres
    environment:
      POSTGRES_DB: asan_idp
      POSTGRES_USER: admin
      POSTGRES_PASSWORD: secure_password
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    networks:
      - asan-network

  # Redis ìºì‹œ
  redis:
    image: redis:7-alpine
    container_name: asan-redis
    ports:
      - "6379:6379"
    networks:
      - asan-network

  # Backend (FastAPI)
  backend:
    build:
      context: ../backend
      dockerfile: ../docker/backend.Dockerfile
    container_name: asan-backend
    environment:
      DATABASE_URL: postgresql://admin:secure_password@postgres:5432/asan_idp
      REDIS_URL: redis://redis:6379/0
    ports:
      - "8000:8000"
    depends_on:
      - postgres
      - redis
    volumes:
      - ../backend:/app
    networks:
      - asan-network
    command: uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload

  # Frontend (React + Vite)
  frontend:
    build:
      context: ../frontend
      dockerfile: ../docker/frontend.Dockerfile
    container_name: asan-frontend
    ports:
      - "5173:5173"
    volumes:
      - ../frontend:/app
      - /app/node_modules
    networks:
      - asan-network
    command: npm run dev -- --host

volumes:
  postgres_data:

networks:
  asan-network:
    driver: bridge
```

---

## **ì‹¤í–‰ ë°©ë²•**

### **ê°œë°œ í™˜ê²½ (ë¡œì»¬)**

```bash
# Terminal 1: Backend
cd C:\projects\datastreams\asan\backend
.\venv\Scripts\activate
uvicorn app.main:app --reload

# Terminal 2: Frontend
cd C:\projects\datastreams\asan\frontend
npm run dev

# ì ‘ì†
# Frontend: http://localhost:5173
# Backend API Docs: http://localhost:8000/docs
```

### **Docker í™˜ê²½**

```bash
cd C:\projects\datastreams\asan\docker
docker-compose up -d

# ë¡œê·¸ í™•ì¸
docker-compose logs -f

# ì¢…ë£Œ
docker-compose down
```

---

## **ë‹¤ìŒ ë‹¨ê³„**

React ê¸°ë°˜ í†µí•© ëŒ€ì‹œë³´ë“œ í”„ë ˆì„ì›Œí¬ê°€ ì™„ì„±ë˜ë©´, ì´ì œ ë‹¤ìŒ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”:


**Q1: ì§€ê¸ˆ ë°”ë¡œ êµ¬í˜„ì„ ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?**

- A) ë„¤, ì§€ê¸ˆ ë°”ë¡œ ì½”ë“œ ì‘ì„± ì‹œì‘ (ì–´ëŠ ë¶€ë¶„ë¶€í„°?)
- B) ë¨¼ì € ì „ì²´ í”„ë¡œì íŠ¸ scaffolding ìŠ¤í¬ë¦½íŠ¸ ì œê³µ
- C) íŠ¹ì • ëª¨ë“ˆ(SFR-007 Text2SQL ë“±)ë¶€í„° ìƒì„¸ êµ¬í˜„
- D) Docker í™˜ê²½ ë¨¼ì € ì…‹ì—…


**Q2: ë°ì´í„° ì‹œê°í™” ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„ í˜¸ë„ëŠ”?**

- A) Recharts (ê°„ë‹¨, React ì¹œí™”ì )
- B) Apache ECharts (ê°•ë ¥í•œ ê¸°ëŠ¥)
- C) Plotly.js (ê³¼í•™/í†µê³„ ì‹œê°í™”)
- D) í˜¼í•© ì‚¬ìš© (ëª©ì ë³„ ì„ íƒ)


**Q3: í˜„ì¬ RTX 3090 í™˜ê²½ì—ì„œ LLM ë¡œì»¬ ì‹¤í–‰ì„ ì›í•˜ì‹œë‚˜ìš”?**

- A) ë„¤, LLaMA/Mistral ë“± ì˜¤í”ˆì†ŒìŠ¤ ëª¨ë¸ ë¡œì»¬ ì‹¤í–‰
- B) OpenAI API ì‚¬ìš© (ë¹ ë¥¸ ê°œë°œ)
- C) í•˜ì´ë¸Œë¦¬ë“œ (ë¡œì»¬ + API)